(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[11],{1002:function(e,a,t){"use strict";var n=t(2),r=t.n(n),c=t(932),o=t(934),s=t(933),i=t(930),l=t(931),u=t(983),p=t(926),d=t(914),m=t(962),f=t(1017),h=t(1075),b=t(964),g=t(1052),v=t(965),E=function(e){var a=e.text,t=r.a.useState(!1),n=Object(d.a)(t,2),c=n[0],o=n[1],s=function(){o(!c)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{isOpen:c,toggle:function(){s()},style:{width:"88%"},className:"modal-danger"},r.a.createElement(b.a,null,"Error"),r.a.createElement(g.a,null,a.error),r.a.createElement(v.a,null,r.a.createElement(p.a,{color:"danger",onClick:s},"Do Something")," ",r.a.createElement(p.a,{color:"secondary",onClick:s},"Cancel"))))},O=function(e){var a=e.children,t=e.success,c=Object(n.useState)(!0),o=Object(d.a)(c,2),s=o[0];o[1];return r.a.createElement(m.a,null,!1===t.success?null:r.a.createElement(f.a,{className:"bg-danger",isOpen:s},r.a.createElement("b",null,"Error: ",t.error),r.a.createElement("br",null),r.a.createElement("b",null,"Error de conexion"===t.error?"Ocurrio un error inesperado al momento de intetar establecer conexi\xf3n por favor recargue su navegador nuevamente.":"","  "),r.a.createElement("br",null)),r.a.createElement(E,{text:t}),a)},j=t(919),x=t(997),y=(t(927),t(954)),N=t(955),_=(t(956),t(957)),k=t(928);Object(k.b)();a.a=function(e){var a=e.onCreate,t=e.expensestype,n=e.success,d=e.expense;return r.a.createElement(O,{success:n},r.a.createElement(c.a,null,r.a.createElement(o.a,null,"Ingresar Gasto"),r.a.createElement(s.a,null,r.a.createElement(j.b,{initialValues:{gasto:d.gasto,cantidad:d.cantidad,precio_unidad:d.precio_unidad,precio_total:d.precio_total,fecha:d.fecha,tipogasto_id:d.tipogasto_id,id:d.id},validationSchema:x.d({gasto:x.e().min(3,"Un gasto debe tener minimo 3 caracteres.").required("El gasto es obligatorio"),cantidad:x.c().max(99999,"La cantidad no puede exceder de 99.999").positive("La cantidad no puede ser negativa.").required("La cantiad es obligatoria"),precio_unidad:x.c().positive("El precio de la unidad no puede ser negativo.").required("La cantiad es obligatoria"),precio_total:x.c().positive("La cantidad no puede ser negativa."),fecha:x.b().required("La fecha es obligatoria"),tipogasto_id:x.e().required("Debe seleccionar un tipo de gasto")}),onSubmit:function(e,t){var n=t.setSubmitting;a(e),n(!0)}},r.a.createElement(j.a,null,r.a.createElement(i.a,null,r.a.createElement(l.a,{sm:"6"},r.a.createElement(N.a,{name:"fecha",type:"text",label:"Fecha",placeholder:"Ingrese la fecha del gasto."})),r.a.createElement(l.a,{sm:"6"},r.a.createElement(u.a,null,r.a.createElement(_.a,{type:"input",label:"Tipo Gasto",name:"tipogasto_id",expensestype:t})))),r.a.createElement(i.a,null,r.a.createElement(l.a,{sm:"3"},r.a.createElement(y.a,{name:"cantidad",type:"text",label:"Cantidad",placeholder:"Ingrese una cantidad."})),r.a.createElement(l.a,{sm:"9"},r.a.createElement(y.a,{name:"gasto",type:"text",label:"Gasto",placeholder:"Ingrese un gasto."}))),r.a.createElement(i.a,null,r.a.createElement(l.a,{sm:"6"},r.a.createElement(y.a,{name:"precio_unidad",type:"text",label:"Precio unid.",placeholder:"Ingrese el precio por unidad."})),r.a.createElement(l.a,{sm:"6"},r.a.createElement(y.a,{name:"precio_total",type:"text",label:"Precio total",placeholder:"Ingrese el precio total (opcional)."}))),r.a.createElement("hr",null),r.a.createElement(i.a,null,r.a.createElement(l.a,{sm:{size:6,offset:4}},r.a.createElement(p.a,{className:"col-sm-3 m-1",type:"reset",color:"secondary",size:"sm"},"Reset"),r.a.createElement(p.a,{className:"col-sm-3 m-1",type:"submit",color:"dark",size:"sm"},"Register"))))))))}},1017:function(e,a,t){"use strict";var n=t(34),r=t(90),c=t(920),o=t(2),s=t.n(o),i=t(60),l=t.n(i),u=t(907),p=t.n(u),d=t(908),m=t(941),f={children:l.a.node,className:l.a.string,closeClassName:l.a.string,closeAriaLabel:l.a.string,cssModule:l.a.object,color:l.a.string,fade:l.a.bool,isOpen:l.a.bool,toggle:l.a.func,tag:d.m,transition:l.a.shape(m.a.propTypes),innerRef:l.a.oneOfType([l.a.object,l.a.string,l.a.func])},h={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:Object(c.a)({},m.a.defaultProps,{unmountOnExit:!0})};function b(e){var a=e.className,t=e.closeClassName,o=e.closeAriaLabel,i=e.cssModule,l=e.tag,u=e.color,f=e.isOpen,h=e.toggle,b=e.children,g=e.transition,v=e.fade,E=e.innerRef,O=Object(r.a)(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),j=Object(d.i)(p()(a,"alert","alert-"+u,{"alert-dismissible":h}),i),x=Object(d.i)(p()("close",t),i),y=Object(c.a)({},m.a.defaultProps,{},g,{baseClass:v?g.baseClass:"",timeout:v?g.timeout:0});return s.a.createElement(m.a,Object(n.a)({},O,y,{tag:l,className:j,in:f,role:"alert",innerRef:E}),h?s.a.createElement("button",{type:"button",className:x,"aria-label":o,onClick:h},s.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,b)}b.propTypes=f,b.defaultProps=h,a.a=b},1108:function(e,a,t){"use strict";t.r(a);var n=t(917),r=t.n(n),c=t(918),o=t(914),s=t(2),i=t.n(s),l=t(1002),u=t(996),p=t(928),d=t(244);Object(u.a)();a.default=Object(d.b)((function(e){return{expensestypes:e.expensestype.expensestype,expense:e.personalexpenses.personalexpense}}))((function(e){var a=e.match,t=e.expensestypes,n=e.expense,s=a.params,u=t.map((function(e){return{value:e.id,label:e.gasto}})),d=i.a.useState({success:!1,error:null}),m=Object(o.a)(d,2),f=m[0],h=m[1];i.a.useEffect((function(){Object(p.c)(s)}),[]);var b=function(){var a=Object(c.a)(r.a.mark((function a(t){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,""===t.precio_total&&(n=t.cantidad*t.precio_unidad,Object.assign(t,{precio_total:n})),Object.assign(t,{user_id:JSON.parse(localStorage.getItem("auth")).id}),a.next=5,Object(p.d)(t);case 5:return a.next=7,Object(p.b)();case 7:e.history.push("/expenses/moduls/personalexpenses"),a.next=15;break;case 10:a.prev=10,a.t0=a.catch(0),Object.assign(a.t0,{success:!0}),Object.assign(a.t0,{error:a.t0.errors}),h(a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(e){return a.apply(this,arguments)}}();return i.a.createElement(l.a,{onCreate:b,expensestype:u,success:f,expense:n})}))},911:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"a",(function(){return r}));var n=function(e){if(console.log(e),!1===e.success)throw e;if(e){var a={success:!1,errors:"Error de conexion"};if("TypeError: Failed to fetch"!==e)throw a;throw a}},r=function(e){throw e}},912:function(e,a,t){"use strict";var n=t(237),r=t(238),c=(t(911),function(){function e(){Object(n.a)(this,e);var a=window.location.host;"localhost:3000"===a&&(this.URL="http://localhost/coysa/public/api/"),"johnssther.github.io"===a&&(this.URL="http://coysa.herokuapp.com/api/"),this.API_TOKEN=localStorage.getItem("token")}return Object(r.a)(e,[{key:"onLogin",value:function(e,a){return fetch("".concat(this.URL,"login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"registerUser",value:function(e){return fetch("".concat(this.URL,"register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,username:e.username,password:e.password,password_confirmation:e.password_confirmation})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"getExpenses",value:function(e){return fetch("".concat(this.URL,"gastos?api_token=").concat(this.API_TOKEN,"\n        &user_id=").concat(JSON.parse(localStorage.getItem("auth")).id,"\n        &mes=").concat(e.mes)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"saveExpenses",value:function(e){return console.log(e,"joh"),fetch("".concat(this.URL,"gastos"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({api_token:this.API_TOKEN,gasto:e.gasto,cantidad:e.cantidad,precio_unidad:e.precio_unidad,precio_total:e.precio_total,fecha:e.fecha,user_id:e.user_id,tipogasto_id:e.tipogasto_id})}).then((function(e){return e.json()})).catch((function(e){throw e}))}},{key:"updateExpense",value:function(e){return console.log(e),fetch("".concat(this.URL,"gastos/").concat(e.id),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({api_token:this.API_TOKEN,gasto:e.gasto,cantidad:e.cantidad,precio_unidad:e.precio_unidad,precio_total:e.precio_total,fecha:e.fecha,user_id:e.user_id,tipogasto_id:e.tipogasto_id})}).then((function(e){return e.json()})).catch((function(e){throw e}))}},{key:"showExpense",value:function(e){return fetch("".concat(this.URL,"gastos/").concat(e.id,"?api_token=").concat(this.API_TOKEN,"&user_id=").concat(JSON.parse(localStorage.getItem("auth")).id)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"deleteExpense",value:function(e){return fetch("".concat(this.URL,"gastos/").concat(e,"?api_token=").concat(this.API_TOKEN),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){throw e}))}},{key:"getExpensesType",value:function(){return fetch("".concat(this.URL,"tipogastos?api_token=").concat(this.API_TOKEN,"&user_id=").concat(JSON.parse(localStorage.getItem("auth")).id)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}}]),e}());a.a=new c},916:function(e,a,t){"use strict";var n={};t.r(n),t.d(n,"setConfiguracion",(function(){return o}));var r={};t.r(r),t.d(r,"setPersonalexpense",(function(){return s})),t.d(r,"setPersonalexpenses",(function(){return i}));var c={};t.r(c),t.d(c,"setExpensestype",(function(){return l}));var o=function(e){return{type:"SET_CONFIGURACION",payload:e}},s=function(e){return{type:"SET_PERSONALEXPENSE",payload:e}},i=function(e){return{type:"SET_PERSONALEXPENSES",payload:e}},l=function(e){return{type:"SET_EXPENSES_TYPE",payload:e}};t.d(a,"a",(function(){return u}));var u={configuracion:n,personalexpenses:r,expensestype:c}},928:function(e,a,t){"use strict";t.d(a,"b",(function(){return u})),t.d(a,"a",(function(){return p})),t.d(a,"d",(function(){return d})),t.d(a,"c",(function(){return m}));var n=t(917),r=t.n(n),c=t(918),o=t(912),s=t(911),i=t(916),l=t(183),u=function(){var e=Object(c.a)(r.a.mark((function e(){var a,t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={mes:null},e.prev=1,e.next=4,o.a.getExpenses(a);case 4:t=e.sent,l.b.dispatch(i.a.personalexpenses.setPersonalexpenses(t)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),Object(s.b)(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.saveExpenses(a);case 3:if(!1!==(t=e.sent).success){e.next=8;break}Object(s.a)(t),e.next=9;break;case 8:return e.abrupt("return",t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(s.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.updateExpense(a);case 3:if(!1!==(t=e.sent).success){e.next=8;break}Object(s.a)(t),e.next=9;break;case 8:return e.abrupt("return",t);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),Object(s.b)(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(a){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark((function e(a){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.showExpense(a);case 3:return t=e.sent,e.next=6,l.b.dispatch(i.a.personalexpenses.setPersonalexpense(t));case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),Object(s.b)(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}()},954:function(e,a,t){"use strict";var n=t(914),r=t(915),c=t(2),o=t.n(c),s=t(919);a.a=function(e){var a=e.label,t=e.placeholder,c=Object(r.a)(e,["label","placeholder"]),i=Object(s.c)(c),l=Object(n.a)(i,2),u=l[0],p=l[1],d=o.a.useState(!1),m=Object(n.a)(d,2),f=m[0],h=m[1],b=!!f&&u.value.length>2||p.touched;return o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:u.name},a),o.a.createElement("input",Object.assign({className:"form-control sm ".concat(b?p.error?"is-invalid":"is-valid":"")},u,c,{placeholder:t,onFocus:function(){return h(!0)}})),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},p.error))}},955:function(e,a,t){"use strict";var n=t(914),r=t(915),c=t(2),o=t.n(c),s=t(919),i=t(1075),l=t(1052),u=t(927),p=t.n(u),d=t(952);a.a=function(e){var a=e.label,t=e.placeholder,c=Object(r.a)(e,["label","placeholder"]),u=Object(s.c)(c),m=Object(n.a)(u,3),f=m[0],h=m[1],b=m[2],g=(h.value,b.setValue),v=o.a.useState(!1),E=Object(n.a)(v,2),O=E[0],j=E[1],x=o.a.useState(!1),y=Object(n.a)(x,2),N=y[0],_=y[1],k=o.a.useState(p()()),w=Object(n.a)(k,2),S=w[0],C=w[1],T=!!O&&f.value.trim().length>2||h.touched,P=function(){_(!N)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:f.name},a),o.a.createElement("input",Object.assign({className:"form-control ".concat(T?h.error?"is-invalid":"is-valid":"")},f,c,{placeholder:t,onFocus:function(){return j(!0)},onClick:function(){P()}})),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},h.error)),o.a.createElement(i.a,{isOpen:N,toggle:function(){P()},fade:!1},o.a.createElement(l.a,null,o.a.createElement(d.Calendar,{style:{backgroundColor:"red"},onChange:function(e){g(e.format("YYYY/M/D HH:mm:ss")),C(e),P()},value:S}))))}},956:function(e,a,t){"use strict";var n=t(914),r=t(915),c=t(2),o=t.n(c),s=t(1110),i=t(919);a.a=function(e){var a=e.label,t=(e.placeholder,Object(r.a)(e,["label","placeholder"])),c=Object(i.c)(t),l=Object(n.a)(c,2),u=l[0],p=l[1];return o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"col-sm-12"},o.a.createElement("label",{htmlFor:u.name},a),o.a.createElement("div",{className:"form-check"},o.a.createElement(s.a,Object.assign({color:"primary",className:"form-check-input ".concat(p.touched&&p.error?"is-invalid":"is-valid")},u,t)),p.touched&&p.error?o.a.createElement("div",{className:"invalid-feedback"},p.error):null)))}},957:function(e,a,t){"use strict";var n=t(914),r=t(915),c=t(2),o=t.n(c),s=t(919),i=t(958);a.a=function(e){var a=e.label,t=e.expensestype,c=Object(r.a)(e,["label","expensestype"]),l=Object(s.c)(c),u=Object(n.a)(l,3),p=u[0],d=u[1],m=u[2].setValue,f=d.value,h=t.find((function(e){if(e.value===f)return e}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("label",{htmlFor:p.name},a),o.a.createElement(i.a,{className:"is-invalid",options:t,onChange:function(e){m(e.value)},value:h}),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},d.error),d.touched&&d.error?o.a.createElement("small",{className:"form-text text-danger"},d.error):null)}},964:function(e,a,t){"use strict";var n=t(34),r=t(90),c=t(2),o=t.n(c),s=t(60),i=t.n(s),l=t(907),u=t.n(l),p=t(908),d={tag:p.m,wrapTag:p.m,toggle:i.a.func,className:i.a.string,cssModule:i.a.object,children:i.a.node,closeAriaLabel:i.a.string,charCode:i.a.oneOfType([i.a.string,i.a.number]),close:i.a.object},m=function(e){var a,t=e.className,c=e.cssModule,s=e.children,i=e.toggle,l=e.tag,d=e.wrapTag,m=e.closeAriaLabel,f=e.charCode,h=e.close,b=Object(r.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),g=Object(p.i)(u()(t,"modal-header"),c);if(!h&&i){var v="number"===typeof f?String.fromCharCode(f):f;a=o.a.createElement("button",{type:"button",onClick:i,className:Object(p.i)("close",c),"aria-label":m},o.a.createElement("span",{"aria-hidden":"true"},v))}return o.a.createElement(d,Object(n.a)({},b,{className:g}),o.a.createElement(l,{className:Object(p.i)("modal-title",c)},s),h||a)};m.propTypes=d,m.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},a.a=m},965:function(e,a,t){"use strict";var n=t(34),r=t(90),c=t(2),o=t.n(c),s=t(60),i=t.n(s),l=t(907),u=t.n(l),p=t(908),d={tag:p.m,className:i.a.string,cssModule:i.a.object},m=function(e){var a=e.className,t=e.cssModule,c=e.tag,s=Object(r.a)(e,["className","cssModule","tag"]),i=Object(p.i)(u()(a,"modal-footer"),t);return o.a.createElement(c,Object(n.a)({},s,{className:i}))};m.propTypes=d,m.defaultProps={tag:"div"},a.a=m},983:function(e,a,t){"use strict";var n=t(34),r=t(90),c=t(2),o=t.n(c),s=t(60),i=t.n(s),l=t(907),u=t.n(l),p=t(908),d={children:i.a.node,row:i.a.bool,check:i.a.bool,inline:i.a.bool,disabled:i.a.bool,tag:p.m,className:i.a.string,cssModule:i.a.object},m=function(e){var a=e.className,t=e.cssModule,c=e.row,s=e.disabled,i=e.check,l=e.inline,d=e.tag,m=Object(r.a)(e,["className","cssModule","row","disabled","check","inline","tag"]),f=Object(p.i)(u()(a,!!c&&"row",i?"form-check":"form-group",!(!i||!l)&&"form-check-inline",!(!i||!s)&&"disabled"),t);return"fieldset"===d&&(m.disabled=s),o.a.createElement(d,Object(n.a)({},m,{className:f}))};m.propTypes=d,m.defaultProps={tag:"div"},a.a=m},996:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var n=t(917),r=t.n(n),c=t(918),o=t(912),s=t(916),i=t(183),l=function(){var e=Object(c.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.a.getExpensesType();case 3:a=e.sent,i.b.dispatch(s.a.expensestype.setExpensestype(a)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Ha ocurrido un error"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=11.5f605009.chunk.js.map