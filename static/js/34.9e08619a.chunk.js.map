{"version":3,"sources":["api/login.js","views/Pages/Login/Login.js","api/url.js"],"names":["onLogin","userLogin","passwordLogin","a","fetch","url","URL","method","headers","Accept","body","JSON","stringify","username","password","response","json","Login","props","state","inputUsername","inputPassword","errorLogin","auth","localStorage","getItem","loading","bind","this","setState","data","setItem","api_token","history","push","message","console","log","className","Container","role","Row","Col","md","LinearProgress","CardGroup","Card","CardBody","Form","InputGroup","InputGroupAddon","addonType","InputGroupText","Input","type","placeholder","autoComplete","onChange","event","target","value","xs","Button","color","onClick","to","href","style","background","width","active","tabIndex","from","Component","connection","host","window","location","API_TOKEN","id","parse"],"mappings":"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","file":"static/js/34.9e08619a.chunk.js","sourcesContent":["import url from './url';\n\nexport const onLogin = async (userLogin, passwordLogin) => {\n    const response = await fetch(`${url.URL}login`,\n        {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                username: userLogin,\n                password: passwordLogin,\n            }),\n        },\n    );\n\n    return await response.json();\n};","import React, { Component } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { Button, Card, CardBody, CardGroup, Col, Container, Form, Input, InputGroup, InputGroupAddon, InputGroupText, Row } from 'reactstrap';\nimport { onLogin } from '../../../api/login';\n\nimport { LinearProgress } from '@material-ui/core';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      inputUsername: '',\n      inputPassword: '',\n      errorLogin: false,\n      auth: localStorage.getItem('token') != null ? true : false,\n      loading: false,\n    }\n    // Este enlace es necesario para hacer que `this` funcione en el callback\n    this.onLogin = this.onLogin.bind(this);\n  }\n\n  async onLogin() {\n    this.setState({ loading: true, errorLogin: false })\n    try {\n      const data = await onLogin(this.state.inputUsername, this.state.inputPassword);\n      if (data.username) {\n        localStorage.setItem('auth', JSON.stringify(data));\n        localStorage.setItem('token', data.api_token);\n        this.props.history.push('/')\n      }\n\n      if (data.message === \"The given data was invalid.\") {\n        this.setState({ errorLogin: true, loading: false })\n      }\n\n    } catch (err) {\n      this.setState({ loading: false })\n      console.log(err);\n    }\n\n  \n  }\n\n  render() {\n    return (\n      <div className=\"app flex-row align-items-center\">\n        <Container>\n          {\n            this.state.errorLogin === true ?\n              <div className=\"alert alert-warning\" role=\"alert\">\n                Error: Credenciales incorrectas\n                          </div>\n              :\n              <div />\n          }\n          <Row className=\"justify-content-center\">\n            <Col md=\"8\">\n              {this.state.loading === true ?\n                <LinearProgress />\n                :\n                ''\n              }\n\n              <CardGroup>\n                <Card className=\"p-4\">\n                  <CardBody>\n                    <Form>\n                      <h1>Iniciar Sesión</h1>\n                      <p className=\"text-muted\">Ingresa si ya tienes una cuenta</p>\n                      <InputGroup className=\"mb-3\">\n                        <InputGroupAddon addonType=\"prepend\">\n                          <InputGroupText>\n                            <i className=\"icon-user\"></i>\n                          </InputGroupText>\n                        </InputGroupAddon>\n                        <Input type=\"text\" placeholder=\"Usuario\" autoComplete=\"username\" onChange={(event) => this.setState({ inputUsername: event.target.value })} />\n                      </InputGroup>\n                      <InputGroup className=\"mb-4\">\n                        <InputGroupAddon addonType=\"prepend\">\n                          <InputGroupText>\n                            <i className=\"icon-lock\"></i>\n                          </InputGroupText>\n                        </InputGroupAddon>\n                        <Input type=\"password\" placeholder=\"Contraceña\" autoComplete=\"current-password\" onChange={(event) => this.setState({ inputPassword: event.target.value })} />\n                      </InputGroup>\n                      <Row>\n                        <Col xs=\"6\">\n                          {/* <Link to=\"/\"> */}\n                          <Button color=\"warning\" className=\"px-4\" onClick={this.onLogin}>Iniciar sesón</Button>\n                          {/* </Link> */}\n                        </Col>\n                        <Col xs=\"6\" className=\"text-right\">\n                          <Link to=\"/register\">\n                            Crear una cuenta.\n                          </Link><br></br>\n                          <a href=\"http://coysa.herokuapp.com/password/reset\" target=\"blank\">Olvidé mi contraseña</a>\n                          {/* <Button color=\"link\" className=\"px-0\">Olvide mi contraceña</Button> */}\n                        </Col>\n                      </Row>\n\n                    </Form>\n                  </CardBody>\n                </Card>\n                <Card className=\"text-white py-5 d-md-down-none\" style={{ background:'#FFA73D' ,width: '44%' }}>\n                  <CardBody className=\"text-center\">\n                    <div>\n                      <h2>Crea tu cuenta</h2>\n                      <p>Registrate y vive una verdadera experiencia para llevar el control de tus finanzas personales</p>\n                      <Link to=\"/register\">\n                        <Button color=\"warning\" className=\"mt-3\" active tabIndex={-1}>Registrate Ahora!</Button>\n                      </Link>\n                    </div>\n                  </CardBody>\n                </Card>\n              </CardGroup>\n            </Col>\n          </Row>\n        </Container>\n        {this.state.auth === true &&\n          <Redirect from=\"/\" to=\"/\" />\n        }\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","\n/**\n*Peticiones api\n* @author John Alejandro || @Johnssther\n* @link http://johnalejandro.com\n* link Api\n* http://coysa.herokuapp.com/api/\n*/\n\nexport const connection = () => {\n    const host = window.location.host\n    let URL = null;\n    const API_TOKEN = localStorage.getItem('token');\n\n    if (host === \"localhost:3000\") {\n        URL = \"http://localhost/coysa-laravel6/public/api/\";\n    }\n    if (host === \"johnssther.github.io\") {\n        URL = \"http://coysa.herokuapp.com/api/\";\n    }\n    if (host === \"http://159.65.226.161:3000\") {\n        URL = \"http://localhost/coysa-laravel6/public/api/\";\n    }\n\n    return { URL, API_TOKEN }\n};\n\nexport default {\n    URL: connection().URL,\n    API_TOKEN: connection().API_TOKEN,\n    id:JSON.parse(localStorage.getItem('auth')).id\n}"],"sourceRoot":""}