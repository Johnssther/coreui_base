(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[24],{1086:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),r=a(920),c=a(931),s=a(921),i=a(951),l=a(1058),u=a(937),p=a.n(u),d=a(985),m=a(914),h=function(e){var t=e.label,a=e.placeholder,n=Object(m.a)(e,["label","placeholder"]),r=Object(i.c)(n),c=Object(d.a)(r,2),s=c[0],l=c[1],u=o.a.useState(!1),p=Object(d.a)(u,2),h=p[0],f=p[1],g=!!h&&s.value.trim().length>2||l.touched;return o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:s.name},t),o.a.createElement("input",Object.assign({className:"form-control ".concat(g?l.error?"is-invalid":"is-valid":"")},s,n,{placeholder:a,onFocus:function(){return f(!0)},onClick:function(){console.log("fg")}})),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},l.error))},f=a(1060),g=a(1036),v=a(965),E=function(e){var t=e.label,a=e.placeholder,n=Object(m.a)(e,["label","placeholder"]),r=Object(i.c)(n),c=Object(d.a)(r,3),s=c[0],l=c[1],u=c[2],h=(l.value,u.setValue),E=o.a.useState(!1),b=Object(d.a)(E,2),y=b[0],N=b[1],O=o.a.useState(!1),j=Object(d.a)(O,2),x=j[0],_=j[1],S=o.a.useState(p()()),k=Object(d.a)(S,2),w=k[0],T=k[1],C=!!y&&s.value.trim().length>2||l.touched,P=function(){_(!x)};return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:s.name},t),o.a.createElement("input",Object.assign({className:"form-control ".concat(C?l.error?"is-invalid":"is-valid":"")},s,n,{placeholder:a,onFocus:function(){return N(!0)},onClick:function(){P()}})),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},l.error)),o.a.createElement(f.a,{isOpen:x,toggle:function(){P()},fade:!1,style:{width:"88%"}},o.a.createElement(g.a,null,o.a.createElement(v.Calendar,{style:{backgroundColor:"red"},onChange:function(e){h(e.format("YYYY/M/D HH:mm:ss")),T(e),P()},value:w}))))},b=a(949),y=function(e){var t=e.label,a=e.placeholder,n=e.expensestype,r=Object(m.a)(e,["label","placeholder","expensestype"]),c=Object(i.c)(r),s=Object(d.a)(c,3),l=s[0],u=s[1],p=s[2],h=(u.value,p.setValue),f=o.a.useState(!1),g=Object(d.a)(f,2),v=g[0],E=g[1],y=!!v&&l.value.trim().length>2||u.touched;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:l.name},t),o.a.createElement(b.a,{className:"is-valid",options:n,onChange:function(e){h(e.value)}}),o.a.createElement("input",Object.assign({className:"form-control ".concat(y?u.error?"is-invalid":"is-valid":"")},l,r,{placeholder:a,onFocus:function(){return E(!0)}})),o.a.createElement("div",{className:"valid-feedback"},"Completado"),o.a.createElement("div",{className:"invalid-feedback"},u.error)))},N=a(966);Object(N.a)();var O=function(e){var t=e.onCreate,a=e.expensestype;return o.a.createElement("div",{className:"container"},o.a.createElement(r.a,null,o.a.createElement(c.a,null,"Ingresar Gasto"),o.a.createElement(s.a,null,o.a.createElement(i.b,{initialValues:{gasto:"",cantidad:"",precio_unidad:"",precio_total:"",fecha:p()().format("YYYY/M/D  HH:mm:ss"),tipogasto_id:""},validationSchema:l.c({gasto:l.d().min(3,"Un gasto debe tener minimo 3 caracteres.").required("El gasto es obligatorio"),cantidad:l.b().max(99999,"La cantidad no puede exceder de 99.999").positive("La cantidad no puede ser negativa.").required("La cantiad es obligatoria"),precio_unidad:l.b().positive("El precio de la unidad no puede ser negativo.").required("La cantiad es obligatoria"),precio_total:l.b().positive("La cantidad no puede ser negativa."),fecha:l.a().required("La fecha es obligatoria"),tipogasto_id:l.d().required("Debe seleccionar un tipo de gasto")}),onSubmit:function(e,a){var n=a.setSubmitting;t(e),n(!0)}},o.a.createElement(i.a,null,o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement(E,{name:"fecha",type:"text",label:"Fecha",placeholder:"Ingrese la fecha del gasto."})),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("div",{className:"form-group"},o.a.createElement(y,{name:"tipogasto_id",type:"hidden",label:"Tipo Gasto",placeholder:"Ingrese un tipo de gasto.",expensestype:a})))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-3"},o.a.createElement(h,{name:"cantidad",type:"text",label:"Cantidad",placeholder:"Ingrese una cantidad."})),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement(h,{name:"gasto",type:"text",label:"Gasto",placeholder:"Ingrese un gasto."}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement(h,{name:"precio_unidad",type:"text",label:"Precio unid.",placeholder:"Ingrese el precio por unidad."})),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement(h,{name:"precio_total",type:"text",label:"Precio total",placeholder:"Ingrese el precio total (opcional)."}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-6 offset-md-4"},o.a.createElement("button",{className:"col-sm-3 m-1 btn btn-secondary btn-sm",type:"reset"},"Reset"),o.a.createElement("button",{className:"col-sm-3 m-1 btn btn-dark btn-sm",type:"submit"},"Register"))))))))},j=a(945),x=a.n(j),_=a(946),S=a(911),k=a(917),w=a(185),T=function(){var e=Object(_.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.getExpensesType();case 3:t=e.sent,a=t.map((function(e){return{value:e.id,label:e.gasto}})),w.b.dispatch(k.a.expensestype.setExpensestype(a)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Ha ocurrido un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=a(244);T();t.default=Object(C.b)((function(e){return{expensestype:e.expensestype.expensestype}}))((function(e){var t=e.expensestype;return o.a.createElement(O,{onCreate:function(t){if(""===t.precio_total){var a=t.cantidad*t.precio_unidad;Object.assign(t,{precio_total:a})}Object.assign(t,{user_id:JSON.parse(localStorage.getItem("auth")).id}),console.log(t),S.a.saveExpenses(t).then((function(t){console.log(t),t.success?e.history.push("/expenses/moduls/personalexpenses"):alert("Ha ocurrido un error inesperado :(")})).catch((function(e){alert("Ha ocurrido un error inesperado :(")}))},expensestype:t})}))},911:function(e,t,a){"use strict";var n=a(237),o=a(238),r=function(){function e(){Object(n.a)(this,e);var t=window.location.host;"localhost:3000"===t&&(this.URL="http://localhost/coysa/public/api/"),"johnssther.github.io"===t&&(this.URL="http://coysa.herokuapp.com/api/"),this.API_TOKEN=localStorage.getItem("token")}return Object(o.a)(e,[{key:"onLogin",value:function(e,t){return fetch("".concat(this.URL,"login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"registerUser",value:function(e){return fetch("".concat(this.URL,"register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:e.name,email:e.email,username:e.username,password:e.password,password_confirmation:e.password_confirmation})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"saveExpenses",value:function(e){return console.log(e,"joh"),fetch("".concat(this.URL,"gastos"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({api_token:this.API_TOKEN,gasto:e.gasto,cantidad:e.cantidad,precio_unidad:e.precio_unidad,precio_total:e.precio_total,fecha:e.fecha,user_id:e.user_id,tipogasto_id:e.tipogasto_id})}).then((function(e){return e.json()})).catch((function(e){throw e}))}},{key:"getExpenses",value:function(e){return fetch("".concat(this.URL,"gastos?api_token=").concat(this.API_TOKEN,"\n        &user_id=").concat(JSON.parse(localStorage.getItem("auth")).id,"\n        &mes=").concat(e.mes)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"getExpensesType",value:function(){return fetch("".concat(this.URL,"tipogastos?api_token=").concat(this.API_TOKEN,"&user_id=").concat(JSON.parse(localStorage.getItem("auth")).id)).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){throw e}))}},{key:"deleteExpense",value:function(e){return fetch("".concat(this.URL,"gastos/").concat(e,"?api_token=").concat(this.API_TOKEN),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).catch((function(e){throw e}))}}]),e}();t.a=new r},917:function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"setConfiguracion",(function(){return c}));var o={};a.r(o),a.d(o,"setPersonalexpense",(function(){return s})),a.d(o,"setPersonalexpenses",(function(){return i}));var r={};a.r(r),a.d(r,"setExpensestype",(function(){return l}));var c=function(e){return{type:"SET_CONFIGURACION",payload:e}},s=function(e){return{type:"SET_PERSONALEXPENSE",payload:e}},i=function(e){return{type:"SET_PERSONALEXPENSES",payload:e}},l=function(e){return{type:"SET_EXPENSES_TYPE",payload:e}};a.d(t,"a",(function(){return u}));var u={configuracion:n,personalexpenses:o,expensestype:r}},966:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(945),o=a.n(n),r=a(946),c=a(911),s=a(917),i=a(185),l=function(){var e=Object(r.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={mes:null},e.prev=1,e.next=4,c.a.getExpenses(t);case 4:a=e.sent,i.b.dispatch(s.a.personalexpenses.setPersonalexpenses(a)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Ha ocurrido un error"),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=24.5a84f54b.chunk.js.map