(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[15],{1029:function(t,e,a){"use strict";a.r(e);var n=a(236),o=a(237),i=a(239),r=a(238),c=a(241),s=a(240),l=a(2),u=a.n(l),p=a(928),d=a(926),h=a.n(d),f=a(948),g=a(911),m=a(1002),b=a(983),y=a(984),E=a(985),v=a(915),O=a(916),j=a(917),S=a(1023),k=a(1024),T=a(931),C=a(1025),N=function(t){function e(t){var a;return Object(n.a)(this,e),(a=Object(i.a)(this,Object(r.a)(e).call(this,t))).tipoGasto=function(t,e){a.setState({inputTipogasto:t.value})},a.state={fecha:"",inputFecha:h()(),inputGasto:"",inputPrecioUnidad:"",inputCantidad:"",inputPrecioTotal:"",inputTipogasto:"",options:[],loading:!0,large:!1,textError:"No ha ingresado ningun gasto"},a.addExpenses=a.addExpenses.bind(Object(c.a)(a)),a.toggleLarge=a.toggleLarge.bind(Object(c.a)(a)),a}return Object(s.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){var t=this;g.a.getTipogastos().then((function(e){var a=e.map((function(t){return{value:t.id,label:t.gasto}}));t.setState({options:a,loading:!1,textError:""})}))}},{key:"addExpense",value:function(t){var e=this,a={gasto:t.gasto,cantidad:t.cantidad,precioUnidad:t.precioUnidad,precioTotal:t.precioTotal,Fecha:t.Fecha,id_usuario:t.id_usuario,tipogasto_id:t.tipogasto_id};g.a.saveExpenses(a).then((function(t){e.props.history.push("/expenses/moduls/personalexpenses"),console.log(t)})).catch((function(t){console.log(t),alert("Ha ocurrido un error inesperado :(")}))}},{key:"addExpenses",value:function(){var t={gasto:this.state.inputGasto,cantidad:this.state.inputCantidad,precioUnidad:this.state.inputPrecioUnidad,precioTotal:""===this.state.inputPrecioTotal?this.state.inputCantidad*this.state.inputPrecioUnidad:this.state.inputPrecioTotal,Fecha:this.state.inputFecha.format("YYYY/M/D"),id_usuario:JSON.parse(localStorage.getItem("auth")).id,tipogasto_id:this.state.inputTipogasto};return""===t.Fecha?(this.setState({textError:"Seleccione una fecha por favor"}),!1):""===t.tipogasto_id?(this.setState({textError:"Seleccione el tipo de gasto por favor"}),!1):""===t.cantidad?(this.setState({textError:"Debe ingresar la cantidad"}),!1):""===t.gasto?(this.setState({textError:"No ha ingresado ningun gasto"}),!1):""===t.precioUnidad?(this.setState({textError:"No ha ingresado el precio por unidad"}),!1):(this.addExpense(t),!0)}},{key:"toggleLarge",value:function(){this.setState({large:!this.state.large,textError:"Ingrese el costo por unidad"})}},{key:"render",value:function(){var t=this;return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{isOpen:this.state.large,toggle:this.toggleLarge,className:"modal-danger "+this.props.className},u.a.createElement(b.a,{toggle:this.toggleLarge},"Calendario"),u.a.createElement(y.a,null,u.a.createElement(p.Calendar,{style:{backgroundColo:"red"},onChange:function(e){return t.setState({inputFecha:e})},value:this.state.inputFecha}),u.a.createElement("h6",null,u.a.createElement("strong",null,"Fecha: "),this.state.inputFecha.format("YYYY/M/D"))),u.a.createElement(E.a,null,u.a.createElement(v.a,{color:"primary",onClick:this.toggleLarge},"Ok")," ")),u.a.createElement(O.a,null,u.a.createElement(j.a,null,u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputFecha"},"Fecha"),u.a.createElement(T.a,{onClick:this.toggleLarge,type:"text",id:"inputFecha",value:this.state.inputFecha.format("YYYY/M/D"),onChange:function(t){return null}})),u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputTipogasto"},"Tipo Gasto"),u.a.createElement(f.a,{options:this.state.options,onChange:this.tipoGasto}),!0===this.state.loading?u.a.createElement(C.a,{color:"success"}):""),u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputCantidad"},"Cantidad"),u.a.createElement(T.a,{placeholder:"Numero Total",type:"text",id:"inputCantidad",onChange:function(e){return t.setState({inputCantidad:e.target.value})}})),u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputGasto"},"Gasto"),u.a.createElement(T.a,{placeholder:"Ingresar Gasto",type:"text",id:"inputGasto",onChange:function(e){return t.setState({inputGasto:e.target.value})}})),u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputPrecioUnidad"},"Precio unidad"),u.a.createElement(T.a,{placeholder:"$ Costo Unidad",type:"text",id:"inputPrecioUnidad",onChange:function(e){return t.setState({inputPrecioUnidad:e.target.value})}})),u.a.createElement(S.a,null,u.a.createElement(k.a,{htmlFor:"inputPrecioTotal"},"Precio Total"),u.a.createElement(T.a,{placeholder:"$ Costo Total (opcional)",type:"text",id:"inputPrecioTotal",onChange:function(e){return t.setState({inputPrecioTotal:e.target.value})}})),u.a.createElement(v.a,{color:"primary",key:"add",onClick:this.addExpenses},"Guardar"),u.a.createElement("h6",null,this.state.textError))))}}]),e}(l.Component);e.default=N},911:function(t,e,a){"use strict";var n=a(236),o=a(237),i=function(){function t(){Object(n.a)(this,t);var e=window.location.host;"localhost:3000"===e&&(this.URL="http://localhost/coysa/public/api/"),"johnssther.github.io"===e&&(this.URL="http://coysa.herokuapp.com/api/"),this.API_TOKEN=localStorage.getItem("token")}return Object(o.a)(t,[{key:"onLogin",value:function(t,e){return fetch("".concat(this.URL,"login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:t,password:e})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw t}))}},{key:"registerUser",value:function(t){return fetch("".concat(this.URL,"register"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t.name,email:t.email,username:t.username,password:t.password,password_confirmation:t.password_confirmation})}).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw t}))}},{key:"saveExpenses",value:function(t){return fetch("".concat(this.URL,"gastos"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({api_token:this.API_TOKEN,gasto:t.gasto,cantidad:t.cantidad,precio_unidad:t.precioUnidad,precio_total:t.precioTotal,fecha:t.Fecha,user_id:t.id_usuario,tipogasto_id:t.tipogasto_id})}).then((function(t){return t.json()})).catch((function(t){throw t}))}},{key:"getExpenses",value:function(t){return fetch("".concat(this.URL,"gastos?api_token=").concat(this.API_TOKEN,"\n        &user_id=").concat(JSON.parse(localStorage.getItem("auth")).id,"\n        &mes=").concat(t.mes)).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw t}))}},{key:"getTipogastos",value:function(){return fetch("".concat(this.URL,"tipogastos?api_token=").concat(this.API_TOKEN,"&user_id=").concat(JSON.parse(localStorage.getItem("auth")).id)).then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){throw t}))}},{key:"deleteExpense",value:function(t){return fetch("".concat(this.URL,"gastos/").concat(t,"?api_token=").concat(this.API_TOKEN),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){throw t}))}}]),t}();e.a=new i},912:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a(90);function o(t,e){if(null==t)return{};var a,o,i=Object(n.a)(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)a=r[o],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(i[a]=t[a])}return i}},915:function(t,e,a){"use strict";var n=a(34),o=a(90),i=a(910),r=a(70),c=a(2),s=a.n(c),l=a(60),u=a.n(l),p=a(907),d=a.n(p),h=a(908),f={active:u.a.bool,"aria-label":u.a.string,block:u.a.bool,color:u.a.string,disabled:u.a.bool,outline:u.a.bool,tag:h.m,innerRef:u.a.oneOfType([u.a.object,u.a.func,u.a.string]),onClick:u.a.func,size:u.a.string,children:u.a.node,className:u.a.string,cssModule:u.a.object,close:u.a.bool},g=function(t){function e(e){var a;return(a=t.call(this,e)||this).onClick=a.onClick.bind(Object(i.a)(a)),a}Object(r.a)(e,t);var a=e.prototype;return a.onClick=function(t){this.props.disabled?t.preventDefault():this.props.onClick&&this.props.onClick(t)},a.render=function(){var t=this.props,e=t.active,a=t["aria-label"],i=t.block,r=t.className,c=t.close,l=t.cssModule,u=t.color,p=t.outline,f=t.size,g=t.tag,m=t.innerRef,b=Object(o.a)(t,["active","aria-label","block","className","close","cssModule","color","outline","size","tag","innerRef"]);c&&"undefined"===typeof b.children&&(b.children=s.a.createElement("span",{"aria-hidden":!0},"\xd7"));var y="btn"+(p?"-outline":"")+"-"+u,E=Object(h.i)(d()(r,{close:c},c||"btn",c||y,!!f&&"btn-"+f,!!i&&"btn-block",{active:e,disabled:this.props.disabled}),l);b.href&&"button"===g&&(g="a");var v=c?"Close":null;return s.a.createElement(g,Object(n.a)({type:"button"===g&&b.onClick?"button":void 0},b,{className:E,ref:m,onClick:this.onClick,"aria-label":a||v}))},e}(s.a.Component);g.propTypes=f,g.defaultProps={color:"secondary",tag:"button"},e.a=g},916:function(t,e,a){"use strict";var n=a(34),o=a(90),i=a(2),r=a.n(i),c=a(60),s=a.n(c),l=a(907),u=a.n(l),p=a(908),d={tag:p.m,inverse:s.a.bool,color:s.a.string,body:s.a.bool,outline:s.a.bool,className:s.a.string,cssModule:s.a.object,innerRef:s.a.oneOfType([s.a.object,s.a.string,s.a.func])},h=function(t){var e=t.className,a=t.cssModule,i=t.color,c=t.body,s=t.inverse,l=t.outline,d=t.tag,h=t.innerRef,f=Object(o.a)(t,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(p.i)(u()(e,"card",!!s&&"text-white",!!c&&"card-body",!!i&&(l?"border":"bg")+"-"+i),a);return r.a.createElement(d,Object(n.a)({},f,{className:g,ref:h}))};h.propTypes=d,h.defaultProps={tag:"div"},e.a=h},917:function(t,e,a){"use strict";var n=a(34),o=a(90),i=a(2),r=a.n(i),c=a(60),s=a.n(c),l=a(907),u=a.n(l),p=a(908),d={tag:p.m,className:s.a.string,cssModule:s.a.object,innerRef:s.a.oneOfType([s.a.object,s.a.string,s.a.func])},h=function(t){var e=t.className,a=t.cssModule,i=t.innerRef,c=t.tag,s=Object(o.a)(t,["className","cssModule","innerRef","tag"]),l=Object(p.i)(u()(e,"card-body"),a);return r.a.createElement(c,Object(n.a)({},s,{className:l,ref:i}))};h.propTypes=d,h.defaultProps={tag:"div"},e.a=h},918:function(t,e,a){"use strict";function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return(o="function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)})(t)}a.d(e,"a",(function(){return o}))},925:function(t,e,a){"use strict";function n(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,a){return e&&n(t.prototype,e),a&&n(t,a),t}a.d(e,"a",(function(){return o}))}}]);
//# sourceMappingURL=15.c54f7c5b.chunk.js.map